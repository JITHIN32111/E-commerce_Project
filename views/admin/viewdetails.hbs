<style>.img-size{
  height: 450px;
	width: 400px;
	background-size: cover;
	overflow: hidden;
}
.modal-content {
   width: 400px;
  border:none;
}
.modal-body {
   padding: 0;
}

.carousel-control-prev-icon {
	background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E");
	width: 30px;
	height: 48px;
}
.carousel-control-next-icon {
	background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E");
	width: 30px;
	height: 48px;
}</style>

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Dashboard - NiceAdmin Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/adminassets/img/favicon.png" rel="icon">
  <link href="/adminassets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/adminassets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/adminassets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/adminassets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/adminassets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="/adminassets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="/adminassets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/adminassets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/adminassets/css/style.css" rel="stylesheet">
</head>

<main class="main" id="main">
  <body>
    
  

    
    <table class="table table-striped table-dark">
  <thead>
    <tr>
      <th scope="col">No</th>
      <th scope="col">Name</th>
      <th scope="col">Quantity</th>
      <th scope="col">Price</th>
       <th scope="col">Status</th>
      <td scope="col" >Image</td>
      <td scope="col">Options</td>

    </tr>
  </thead>
  <tbody>
    {{#each pro}}
    <tr>
      <th scope="row">{{inc @index}}</th>
      <td>{{this.product.name}}</td>
      <td>{{this.quantity}}</td>
      <td>{{this.product.price}}</td>
      <td>{{this.trackOrder}}</td>

<div class="modal fade" id="returnApprove-modal{{this.item}}" tabindex="-1" role="dialog"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-body">
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                      </button>

                      <div class="form-box">
                        <div class="form-tab">

                          <div class="tab-content" id="tab-content-5">
                            <div class="tab-pane fade show active" id="signin" role="tabpanel"
                              aria-labelledby="signin-tab">

                              <form action="/admin/returnApprove-details" method="post"  >
                                <div class="form-group">
                                  <label for="singin-email">Note</label>
                                  <input type="text" class="form-control" size="50"  value="{{this.note}}" >
                                </div><!-- End .form-group -->
                                  <input type="text" class="form-control" size="50" name="proId"  value="{{this.item}}" hidden>
                                  <input type="text" class="form-control" size="50" name="orderId"  value="{{this._id}}" hidden>

                               <div class="form-group">
                                  <label for="singin-email">Discription</label>
                                  <textarea rows="4" cols="50" name="comment" form="usrform">
                                  {{this.discription}}
                                   </textarea>
                                 
                                </div>

                                

                             



                                <div class="form-footer">
                                  <button type="submit" class="btn btn-outline-primary-2">
                                    <span>Approve</span>
                                    <i class="icon-long-arrow-right"></i>
                                  </button>


                                </div><!-- End .form-footer -->
                              </form>


                            </div><!-- End .form-choice -->
                          </div><!-- .End .tab-pane -->

                        </div><!-- End .tab-content -->
                      </div><!-- End .form-tab -->
                    </div><!-- End .form-box -->
                  </div><!-- End .modal-body -->
                </div><!-- End .modal-content -->
              </div><!-- End .modal-dialog -->
            </div>






<td><a href="" data-toggle="modal" data-target="#largeModal{{this._id}}"><img style="width:50px;height:50px;" src="/photos/products/{{this.product.img.[0]}}" alt=""></a> 

    <div class="modal fade" id="largeModal{{this._id}}" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
    <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-body">
           <!-- carousel -->
          <div
               id='carouselExampleIndicators'
               class='carousel slide'
               data-ride='carousel'
               >
            <ol class='carousel-indicators'>
              <li
                  data-target='#carouselExampleIndicators'
                  data-slide-to='0'
                  class='active'
                  ></li>
              <li
                  data-target='#carouselExampleIndicators'
                  data-slide-to='1'
                  ></li>
              <li
                  data-target='#carouselExampleIndicators'
                  data-slide-to='2'
                  ></li>
            </ol>
            <div class='carousel-inner'>
              <div class='carousel-item active'>
                <img class='img-size' src='/photos/products/{{this.product.img.[0]}}' alt='First slide' />
              <h1 class="bg-dark">{{this.product.name}}</h1>
              </div>
              <div class='carousel-item'>
                <img class='img-size' src='/photos/products/{{this.product.img.[1]}}' alt='Second slide' />
              </div>
              <div class='carousel-item'>
                <img class='img-size' src='/photos/products/{{this.product.img.[0]}}' alt='Second slide' />
              </div>
        
            </div>
            <a
               class='carousel-control-prev'
               href='#carouselExampleIndicators'
               role='button'
               data-slide='prev'
               >
              <span class='carousel-control-prev-icon'
                    aria-hidden='true'
                    ></span>
              <span class='sr-only'>Previous</span>
            </a>
            <a
               class='carousel-control-next'
               href='#carouselExampleIndicators'
               role='button'
               data-slide='next'
               >
              <span
                    class='carousel-control-next-icon'
                    aria-hidden='true'
                    ></span>
              <span class='sr-only'>Next</span>
            </a>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  </td>
      <td>
        {{#if (isReturn this.trackOrder)}}
                 <a href="#returnApprove-modal{{this.item}}"
                data-toggle="modal" class="btn btn-success btn-rounded text-light"><span>Return Request </span><i
                  class="icon-long-arrow-right"></i></a>   





  {{else}}
          {{#if (returnSuccess this.trackOrder)}}
              <p style="color: green;">Retrun Approved</p>
              {{else}}

        {{#if (isDelivered this.trackOrder)}}
       <p style="color: green;">Delivered</p>
         {{else}}
   {{#if (isCancelled this.trackOrder)}}
<p style="color: red;">cancelled</p>
        {{else}}
     <div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
options
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item"  onclick="orde('{{this._id}}','{{this.item}}',{{this.quantity}})">cancel</a> 
     {{#if (isDispatched this.trackOrder)}}
     {{else}} 
      {{#if (isShipped this.trackOrder)}}
      {{else}}

     <a class="dropdown-item" onclick="dispa('{{this._id}}','{{this.item}}')">Dispatched</a>
     {{/if}}
     {{/if}}
     
      {{#if (isShipped this.trackOrder)}}
      {{else}}
        <a class="dropdown-item" onclick="shipped('{{this._id}}','{{this.item}}')">shipped</a>
      {{/if}}
    <a class="dropdown-item" href="#" onclick="delivered('{{this._id}}','{{this.item}}')">Delivered</a>

  </div>
</div>
{{/if}}
{{/if}}
{{/if}}
{{/if}}


</td>
    </tr>






{{/each}}
  </tbody>
</table>
    </body>
   
</main>
   <script src="/adminassets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="/adminassets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/adminassets/vendor/chart.js/chart.min.js"></script>
  <script src="/adminassets/vendor/echarts/echarts.min.js"></script>
  <script src="/adminassets/vendor/quill/quill.min.js"></script>
  <script src="/adminassets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="/adminassets/vendor/tinymce/tinymce.min.js"></script>
  <script src="/adminassets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="/adminassets/js/main.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

 



   <script>


 function orde(orderId,proId,qnty){


     $.ajax({
      url:'/admin/cancel-Ordder/'+orderId+'/'+proId+'/'+qnty,
      type:'put',
      success:(response)=>{
       swal({
  title: "canceled!",
  text: "You clicked the button!",
  icon: "success",
}).then(()=>{
  location.reload()
})
      }
     })
  } 
  </script>


 <script>
 function dispa(orderId,proId){
  alert(orderId,proId)
     $.ajax({
      url:'/admin/dispatch-Ordder/'+orderId+'/'+proId,
      method:'put',
      success:(response)=>{
       swal({
  title: "changed to dispatched!",
  text: "You clicked the button!",
  icon: "success",
}).then(()=>{
  location.reload()
})
         
      }
     })
  }
  </script>


    <script>


 function delivered(orderId,proId){

     $.ajax({
      url:'/admin/delivered-Ordder/'+orderId+'/'+proId,
      method:'put',
      success:(response)=>{
 swal({
  title: "changed to delivered!",
  text: "You clicked the button!",
  icon: "success",
}).then(()=>{
  location.reload()
})
         
      }
      
 })
  }
  function shipped(orderId,proId){


     $.ajax({
      url:'/admin/shipped-Ordder/'+orderId+'/'+proId,
      type:'put',
      success:(response)=>{
       swal({
  title: "changed to shipped!",
  text: "You clicked the button!",
  icon: "success",
}).then(()=>{
  location.reload()
})
         
      }
     })
  }



     {{!-- $("#return-approve").submit((e) => {
        e.preventDefault()
        $.ajax({
            url: '/admin/returnApprove-details', 
            type: 'post',
            data: $('#return-approve').serialize(),
           

            success:(response) => {

   Swal.fire({
  imageUrl: 'https://cdn.dribbble.com/users/2613050/screenshots/7347945/discount_logo.gif',
  imageHeight: 300,
  imageAlt: 'A tall image'
}).then(()=>{
           location.reload()
        })
         
         }
        })
        }) --}}
  
  </script>
 


 